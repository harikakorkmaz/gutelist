<div class="container">
  <% if @user.errors.any? %>
    <ul>
      <% @user.errors.full_messages.each do |message| %>
        <li>error <%= message %></li>
      <% end %>
    </ul>
  <% end %>
<h2 class="text-center">ユーザー情報</h2><br>
  <div class="row">
    <div class="main_group col-xs-12">
      <div class="col-xs-4">
        <%= form_with model: @user, local: true do |f| %>
        <h4><%= f.label "プロフィール画像" %></h4><br>
        <img id="preview" width="200" height="200"><br>
        <%= f.attachment_field :image %>
      </div>
      <div class="col-xs-4">
        <h4><%= f.label "ユーザー名" %></h4><br>
        <%= f.text_field :name %>
      </div>
      <div class="col-xs-4">
        <h4><%= f.label "プロフィール文" %></h4><br>
        <%= f.text_area :introduction %>
      </div>
      <div class="row">
        <div class="text-right col-xs-12">
        <%= f.submit "保存", class: "btn btn-info btn-lg" %>
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>

<script>
  $('#user_image').on('change', function (e) {
    var reader = new FileReader();
    reader.onload = function (e) {
        $("#preview").attr('src', e.target.result);
    }
    reader.readAsDataURL(e.target.files[0]);
});
</script>